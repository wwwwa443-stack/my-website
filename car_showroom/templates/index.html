<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8">
  <title>ููุณูุนุฉ ุงูุณูุงุฑุงุช</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body class="{{ 'dark' if mode == 'dark' else '' }}">

  <header class="site-header">
    <!-- ุฒุฑ ุงููุถุน ุงููููู / ุงูุนุงุฏู -->
    <div class="left">
      {% if mode == 'dark' %}
        <a class="mode-link" href="{{ url_for('index', q=q) }}">โ๏ธ ุงููุถุน ุงูุนุงุฏู</a>
      {% else %}
        <a class="mode-link" href="{{ url_for('index_dark', q=q) }}">๐ ุงููุถุน ุงููููู</a>
      {% endif %}
    </div>

    <!-- ุนููุงู (ูุฑูุฒู) -->
    <div class="center">
      <h1>ููุณูุนุฉ ุงูุณูุงุฑุงุช</h1>
    </div>

    <!-- ุดุฑูุท ุงูุจุญุซ (ุนูู ุงููููู) -->
    <div class="right">
      {% if mode == 'dark' %}
        <form action="{{ url_for('index_dark') }}" method="get" class="search-form">
          <input name="q" value="{{ q }}" type="text" placeholder="ุงุจุญุซ ุนู ุณูุงุฑุฉ..." class="search-input">
          <!-- ูุญุชูุธ ุจูููุฉ ุงูุจุญุซ ููุทุ ุงููุถุน ุงููููู route ูู /dark -->
        </form>
      {% else %}
        <form action="{{ url_for('index') }}" method="get" class="search-form">
          <input name="q" value="{{ q }}" type="text" placeholder="ุงุจุญุซ ุนู ุณูุงุฑุฉ..." class="search-input">
        </form>
      {% endif %}
    </div>
  </header>

  <main>
    {% if cars %}
    <div class="cars-grid">
      {% for car in cars %}
      {# ุงูุฑุงุจุท ููุฑุฑ 'mode=dark' ูู ููุง ูู ุงููุถุน ุงููููู ุนุดุงู ุตูุญุฉ ุงูุชูุงุตูู ุชุจูู ููููุฉ ุฃูุถุงู #}
      {% if mode == 'dark' %}
        <a href="{{ url_for('car_page', car_id=car.id, mode='dark') }}" class="car-card" style="animation-delay: {{ (loop.index0 * 0.08)|round(2) }}s;">
      {% else %}
        <a href="{{ url_for('car_page', car_id=car.id) }}" class="car-card" style="animation-delay: {{ (loop.index0 * 0.08)|round(2) }}s;">
      {% endif %}
          <img src="{{ url_for('static', filename='images/' + car.images[0]) }}" alt="{{ car.name }}">
          <div class="car-info">
            <span class="car-name">{{ car.name }}</span>
            <span class="car-rating">
              {% for i in range(car.rating) %}โญ{% endfor %}
            </span>
          </div>
        </a>
      {% endfor %}
    </div>
    {% else %}
      <p class="no-results">ูุง ุชูุฌุฏ ูุชุงุฆุฌ ูุทุงุจูุฉ ููุจุญุซ.</p>
    {% endif %}
  </main>

</body>
</html>
